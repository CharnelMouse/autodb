# autodb

autodb is an R package for automatic normalisation of a data frame to
third normal form, with the intention of easing the process of data
cleaning. (Usage to design your actual database for you is not advised.)

## Installation

Install the stable released version from CRAN with:

``` r
install.packages("autodb")
```

Install the unstable development version from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("CharnelMouse/autodb")
```

## Example

Turning a simple data frame into a database:

``` r
library(autodb)
#> 
#> Attaching package: 'autodb'
#> The following object is masked from 'package:stats':
#> 
#>     decompose
summary(ChickWeight)
#>      weight           Time           Chick     Diet   
#>  Min.   : 35.0   Min.   : 0.00   13     : 12   1:220  
#>  1st Qu.: 63.0   1st Qu.: 4.00   9      : 12   2:120  
#>  Median :103.0   Median :10.00   20     : 12   3:120  
#>  Mean   :121.8   Mean   :10.72   10     : 12   4:118  
#>  3rd Qu.:163.8   3rd Qu.:16.00   17     : 12          
#>  Max.   :373.0   Max.   :21.00   19     : 12          
#>                                  (Other):506
db <- autodb(ChickWeight)
db
#> database with 2 relations
#> 4 attributes: weight, Time, Chick, Diet
#> relation Chick: Chick, Diet; 50 records
#>   key 1: Chick
#> relation Time_Chick: Time, Chick, weight; 578 records
#>   key 1: Time, Chick
#> references:
#> Time_Chick.{Chick} -> Chick.{Chick}
graphviz_text <- gv(db)
DiagrammeR::grViz(graphviz_text)
```

![](reference/figures/README-example-1.png)

Using the `exclude` argument to forbid certain variables from appearing
in keys:

``` r
summary(CO2)
#>      Plant             Type         Treatment       conc          uptake     
#>  Qn1    : 7   Quebec     :42   nonchilled:42   Min.   :  95   Min.   : 7.70  
#>  Qn2    : 7   Mississippi:42   chilled   :42   1st Qu.: 175   1st Qu.:17.90  
#>  Qn3    : 7                                    Median : 350   Median :28.30  
#>  Qc1    : 7                                    Mean   : 435   Mean   :27.21  
#>  Qc3    : 7                                    3rd Qu.: 675   3rd Qu.:37.12  
#>  Qc2    : 7                                    Max.   :1000   Max.   :45.50  
#>  (Other):42
db2_noexclude <- autodb(CO2)
db2_noexclude
#> database with 3 relations
#> 5 attributes: Plant, Type, Treatment, conc, uptake
#> relation Plant: Plant, Type, Treatment; 12 records
#>   key 1: Plant
#> relation Plant_conc: Plant, conc, Treatment, uptake; 84 records
#>   key 1: Plant, conc
#>   key 2: Treatment, conc, uptake
#> relation conc_uptake: conc, uptake, Type; 82 records
#>   key 1: conc, uptake
#> references:
#> Plant_conc.{Plant} -> Plant.{Plant}
#> Plant_conc.{conc, uptake} -> conc_uptake.{conc, uptake}
graphviz_text2_noexclude <- gv(db2_noexclude)
DiagrammeR::grViz(graphviz_text2_noexclude)
```

![](reference/figures/README-exclude_example-1.png)

``` r
db2 <- autodb(CO2, exclude = "uptake")
db2
#> database with 2 relations
#> 5 attributes: Plant, Type, Treatment, conc, uptake
#> relation Plant: Plant, Type, Treatment; 12 records
#>   key 1: Plant
#> relation Plant_conc: Plant, conc, uptake; 84 records
#>   key 1: Plant, conc
#> references:
#> Plant_conc.{Plant} -> Plant.{Plant}
graphviz_text2 <- gv(db2)
DiagrammeR::grViz(graphviz_text2)
```

![](reference/figures/README-exclude_example-2.png)

There are also functions for doing each step of the database creation
separately, including functional dependency detection and normalisation.
See the vignette for more details.

# Package index

## All functions

- [`attrs()`](https://charnelmouse.github.io/autodb/dev/reference/attrs.md)
  [`` `attrs<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/attrs.md)
  : Relational data attributes
- [`attrs_order()`](https://charnelmouse.github.io/autodb/dev/reference/attrs_order.md)
  [`` `attrs_order<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/attrs_order.md)
  : Relational data attribute order
- [`autodb()`](https://charnelmouse.github.io/autodb/dev/reference/autodb.md)
  : Create a normalised database from a data frame
- [`autoref()`](https://charnelmouse.github.io/autodb/dev/reference/autoref.md)
  : Add foreign key references to a normalised database
- [`create()`](https://charnelmouse.github.io/autodb/dev/reference/create.md)
  : Create instance of a schema
- [`d2()`](https://charnelmouse.github.io/autodb/dev/reference/d2.md) :
  Generate D2 input text to plot objects
- [`d2(`*`<data.frame>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/d2.data.frame.md)
  : Generate D2 input text to plot a data frame
- [`d2(`*`<database>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/d2.database.md)
  : Generate D2 input text to plot databases
- [`d2(`*`<database_schema>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/d2.database_schema.md)
  : Generate D2 input text to plot database schemas
- [`d2(`*`<relation>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/d2.relation.md)
  : Generate D2 input text to plot relations
- [`d2(`*`<relation_schema>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/d2.relation_schema.md)
  : Generate D2 input text to plot relation schemas
- [`database()`](https://charnelmouse.github.io/autodb/dev/reference/database.md)
  : Databases
- [`database_schema()`](https://charnelmouse.github.io/autodb/dev/reference/database_schema.md)
  : Database schemas
- [`decompose()`](https://charnelmouse.github.io/autodb/dev/reference/decompose.md)
  : Decompose a data frame based on given normalised dependencies
- [`dependant()`](https://charnelmouse.github.io/autodb/dev/reference/dependant.md)
  [`` `dependant<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/dependant.md)
  : Dependants
- [`detset()`](https://charnelmouse.github.io/autodb/dev/reference/detset.md)
  [`` `detset<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/detset.md)
  : Determinant sets
- [`df_duplicated()`](https://charnelmouse.github.io/autodb/dev/reference/df_duplicated.md)
  [`df_unique()`](https://charnelmouse.github.io/autodb/dev/reference/df_duplicated.md)
  [`df_anyDuplicated()`](https://charnelmouse.github.io/autodb/dev/reference/df_duplicated.md)
  [`df_records()`](https://charnelmouse.github.io/autodb/dev/reference/df_duplicated.md)
  : Determine Duplicate Elements
- [`df_equiv()`](https://charnelmouse.github.io/autodb/dev/reference/df_equiv.md)
  : Test data frames for equivalence under row reordering
- [`df_rbind()`](https://charnelmouse.github.io/autodb/dev/reference/df_rbind.md)
  : Combine R Objects by Rows or Columns
- [`discover()`](https://charnelmouse.github.io/autodb/dev/reference/discover.md)
  : Dependency discovery with DFD
- [`discover_keys()`](https://charnelmouse.github.io/autodb/dev/reference/discover_keys.md)
  : Key discovery with MCSS
- [`functional_dependency()`](https://charnelmouse.github.io/autodb/dev/reference/functional_dependency.md)
  : Functional dependency vectors
- [`gv()`](https://charnelmouse.github.io/autodb/dev/reference/gv.md) :
  Generate Graphviz input text to plot objects
- [`gv(`*`<data.frame>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/gv.data.frame.md)
  : Generate Graphviz input text to plot a data frame
- [`gv(`*`<database>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/gv.database.md)
  : Generate Graphviz input text to plot databases
- [`gv(`*`<database_schema>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/gv.database_schema.md)
  : Generate Graphviz input text to plot database schemas
- [`gv(`*`<relation>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/gv.relation.md)
  : Generate Graphviz input text to plot relations
- [`gv(`*`<relation_schema>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/gv.relation_schema.md)
  : Generate Graphviz input text to plot relation schemas
- [`insert()`](https://charnelmouse.github.io/autodb/dev/reference/insert.md)
  : Insert data
- [`keys()`](https://charnelmouse.github.io/autodb/dev/reference/keys.md)
  [`` `keys<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/keys.md)
  : Relational data keys
- [`merge_empty_keys()`](https://charnelmouse.github.io/autodb/dev/reference/merge_empty_keys.md)
  : Merge relation schemas with empty keys
- [`merge_schemas()`](https://charnelmouse.github.io/autodb/dev/reference/merge_schemas.md)
  : Merge relation schemas in given pairs
- [`normalise()`](https://charnelmouse.github.io/autodb/dev/reference/normalise.md)
  : Create normalised database schemas from functional dependencies
- [`nudge`](https://charnelmouse.github.io/autodb/dev/reference/nudge.md)
  : Nudge meta-analysis data
- [`records()`](https://charnelmouse.github.io/autodb/dev/reference/records.md)
  [`` `records<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/records.md)
  : Relational data records
- [`reduce()`](https://charnelmouse.github.io/autodb/dev/reference/reduce.md)
  : Remove relations not linked to the main relations
- [`reduce(`*`<database>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/reduce.database.md)
  : Remove database relations not linked to the main relations
- [`reduce(`*`<database_schema>`*`)`](https://charnelmouse.github.io/autodb/dev/reference/reduce.database_schema.md)
  : Remove database schema relations not linked to the given relations
- [`references()`](https://charnelmouse.github.io/autodb/dev/reference/references.md)
  [`` `references<-`() ``](https://charnelmouse.github.io/autodb/dev/reference/references.md)
  : Schema references
- [`rejoin()`](https://charnelmouse.github.io/autodb/dev/reference/rejoin.md)
  : Join a database into a data frame
- [`relation()`](https://charnelmouse.github.io/autodb/dev/reference/relation.md)
  : Relation vectors
- [`relation_schema()`](https://charnelmouse.github.io/autodb/dev/reference/relation_schema.md)
  : Relation schema vectors
- [`remove_extraneous()`](https://charnelmouse.github.io/autodb/dev/reference/remove_extraneous.md)
  : Remove extraneous components from functional dependencies
- [`rename_attrs()`](https://charnelmouse.github.io/autodb/dev/reference/rename_attrs.md)
  : Rename relational data attributes
- [`subrelations()`](https://charnelmouse.github.io/autodb/dev/reference/subrelations.md)
  : Database subrelations
- [`subschemas()`](https://charnelmouse.github.io/autodb/dev/reference/subschemas.md)
  : Schema subschemas
- [`synthesise()`](https://charnelmouse.github.io/autodb/dev/reference/synthesise.md)
  : Synthesise relation schemas from functional dependencies

# Articles

### All vignettes

- [Using
  autodb](https://charnelmouse.github.io/autodb/dev/articles/autodb.md):
- [Limitations](https://charnelmouse.github.io/autodb/dev/articles/limits.md):
- [A larger example: the nudge
  dataset](https://charnelmouse.github.io/autodb/dev/articles/nudge.md):
- [Handling missing
  values](https://charnelmouse.github.io/autodb/dev/articles/null.md):
- [Planned
  improvements](https://charnelmouse.github.io/autodb/dev/articles/plans.md):
