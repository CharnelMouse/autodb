<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Synthesise relation schemas from functional dependencies — synthesise • autodb</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Synthesise relation schemas from functional dependencies — synthesise"><meta name="description" content="Synthesises the dependency relationships in dependencies into a database
schema satisfying at least third normal form, using Bernstein's synthesis."><meta property="og:description" content="Synthesises the dependency relationships in dependencies into a database
schema satisfying at least third normal form, using Bernstein's synthesis."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">autodb</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/autodb.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/limits.html">Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/nudge.html">A larger example: the nudge dataset</a></li>
    <li><a class="dropdown-item" href="../articles/null.html">Handling missing values</a></li>
    <li><a class="dropdown-item" href="../articles/plans.html">Planned improvements</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CharnelMouse/autodb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Synthesise relation schemas from functional dependencies</h1>
      <small class="dont-index">Source: <a href="https://github.com/CharnelMouse/autodb/blob/master/R/synthesise.r" class="external-link"><code>R/synthesise.r</code></a></small>
      <div class="d-none name"><code>synthesise.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Synthesises the dependency relationships in dependencies into a database
schema satisfying at least third normal form, using Bernstein's synthesis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">synthesise</span><span class="op">(</span></span>
<span>  <span class="va">dependencies</span>,</span>
<span>  ensure_lossless <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reduce_attributes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_avoidable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  constants_name <span class="op">=</span> <span class="st">"constants"</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress_file <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dependencies">dependencies<a class="anchor" aria-label="anchor" href="#arg-dependencies"></a></dt>
<dd><p>a <code><a href="functional_dependency.html">functional_dependency</a></code> object, as given by
<code><a href="discover.html">discover</a></code>.</p></dd>


<dt id="arg-ensure-lossless">ensure_lossless<a class="anchor" aria-label="anchor" href="#arg-ensure-lossless"></a></dt>
<dd><p>a logical, TRUE by default. If TRUE, and the
decomposition isn't lossless, an extra relation is added to make the
decomposition lossless.</p></dd>


<dt id="arg-reduce-attributes">reduce_attributes<a class="anchor" aria-label="anchor" href="#arg-reduce-attributes"></a></dt>
<dd><p>a logical, TRUE by default. If TRUE,
<code>dependencies</code> are checked for determinant attributes that are made
redundant by the other dependencies. This is redundant if
<code>dependencies</code> is output from <code>discover</code>, since there will be no
such redundant attributes.</p></dd>


<dt id="arg-remove-avoidable">remove_avoidable<a class="anchor" aria-label="anchor" href="#arg-remove-avoidable"></a></dt>
<dd><p>a logical, indicating whether to remove avoidable
attributes in relations. If so, then an attribute are removed from
relations if the keys can be changed such that it is not needed to preserve
the given functional dependencies.</p></dd>


<dt id="arg-constants-name">constants_name<a class="anchor" aria-label="anchor" href="#arg-constants-name"></a></dt>
<dd><p>a scalar character, giving the name for any relation
created to store constant attributes. If this is the same as a generated
relation name, it will be changed, with a warning, to ensure that all
relations have a unique name.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>a logical, for whether to display progress to the user during
dependency search in <code><a href="discover.html">discover</a></code>.</p></dd>


<dt id="arg-progress-file">progress_file<a class="anchor" aria-label="anchor" href="#arg-progress-file"></a></dt>
<dd><p>a scalar character or a connection. If <code>progress</code>
is non-zero, determines where the progress is written to, in the same way
as the <code>file</code> argument for <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="relation_schema.html">relation_schema</a></code> object, containing the synthesised
relation schemas.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Bernstein's synthesis is a synthesis algorithm for normalisation of a set of
dependencies into a set of relations that are in third normal form. This
implementation is based on the version given in the referenced paper.</p>
<p>The implementation also includes a common additional step, to ensure that the
resulting decomposition is lossless, i.e. a relation satisfying the given
dependencies can be perfectly reconstructed from the relations given by the
decomposition. This is done by adding an additional relation, containing a
key for all the original attributes, if one is not already present.</p>
<p>As an additional optional step, schemas are checked for "avoidable"
attributes, that can be removed without loss of information.</p>
<p>Constant attributes, i.e. those whose only determinant set is empty, get
assigned to a relation with no keys.</p>
<p>Output is independent of the order of the input dependencies: schemas are
sorted according to their simplest keys.</p>
<p>Schemas are sorted before ensuring for losslessness, or removing avoidable
attributes. As a result, neither optional step changes the order of the
schemas, and ensuring losslessness can only add an extra schema to the end of
the output vector.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>3NF synthesis algorithm: Bernstein P. A. (1976) Synthesizing third normal
form relations from functional dependencies. <em>ACM Trans. Database Syst.</em>,
<strong>1, 4</strong>, 277–298.</p>
<p>Removal of avoidable attributes: Ling T., Tompa F. W., Kameda T. (1981) An
improved third normal form for relational databases. <em>ACM Trans. Database
Syst.</em>, <strong>6, 2</strong>, 329–346.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># example 6.24 from The Theory of Relational Databases by David Maier</span></span></span>
<span class="r-in"><span><span class="co"># A &lt;-&gt; B, AC -&gt; D, AC -&gt; E, BD -&gt; C</span></span></span>
<span class="r-in"><span><span class="va">deps</span> <span class="op">&lt;-</span> <span class="fu"><a href="functional_dependency.html">functional_dependency</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="st">"D"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="st">"E"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"D"</span><span class="op">)</span>, <span class="st">"C"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  attrs_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">synthesise</span><span class="op">(</span><span class="va">deps</span>, remove_avoidable <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 relation schemas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 attributes: A, B, C, D, E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> schema A: A, B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 2: B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> schema A_C: A, C, B, D, E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: A, C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 2: B, D</span>
<span class="r-in"><span><span class="fu">synthesise</span><span class="op">(</span><span class="va">deps</span>, remove_avoidable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 relation schemas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 attributes: A, B, C, D, E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> schema A: A, B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 2: B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> schema A_C: A, C, D, E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: A, C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 2: A, D</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Webster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

