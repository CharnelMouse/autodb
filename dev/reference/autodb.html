<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a normalised database from a data frame — autodb • autodb</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a normalised database from a data frame — autodb"><meta name="description" content="This is a wrapper function for applying normalise,
autoref, and decompose. This takes a data frame
and converts it straight into a database, which is the main intended use case
for the package."><meta property="og:description" content="This is a wrapper function for applying normalise,
autoref, and decompose. This takes a data frame
and converts it straight into a database, which is the main intended use case
for the package."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">autodb</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/autodb.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/limits.html">Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/nudge.html">A larger example: the nudge dataset</a></li>
    <li><a class="dropdown-item" href="../articles/null.html">Handling missing values</a></li>
    <li><a class="dropdown-item" href="../articles/plans.html">Planned improvements</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CharnelMouse/autodb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a normalised database from a data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/CharnelMouse/autodb/blob/master/R/autodb.r" class="external-link"><code>R/autodb.r</code></a></small>
      <div class="d-none name"><code>autodb.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a wrapper function for applying <code><a href="normalise.html">normalise</a></code>,
<code><a href="autoref.html">autoref</a></code>, and <code><a href="decompose.html">decompose</a></code>. This takes a data frame
and converts it straight into a database, which is the main intended use case
for the package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">autodb</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  keep_rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"digits"</span><span class="op">)</span>,</span>
<span>  single_ref <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ensure_lossless <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_avoidable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  constants_name <span class="op">=</span> <span class="st">"constants"</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress_file <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>a data.frame, containing the data to be normalised.</p></dd>


<dt id="arg-keep-rownames">keep_rownames<a class="anchor" aria-label="anchor" href="#arg-keep-rownames"></a></dt>
<dd><p>a logical or a string, indicating whether to include the
row names as a column. If a string is given, it is used as the name for the
column, otherwise the column is named "row". Like with the other column
names, the function returns an error if this results in duplicate column
names. Set to FALSE by default.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>a positive integer, indicating how many significant digits are
to be used for numeric and complex variables. This is used for both
pre-formatting in <code><a href="discover.html">discover</a></code>, and for rounding the data before
use in <code><a href="decompose.html">decompose</a></code>, so that the data satisfies the resulting
schema. A value of <code>NA</code> results in no rounding. By default, this uses
<code>getOption("digits")</code>, similarly to <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></code>. See the
"Floating-point variables" section for <code><a href="discover.html">discover</a></code> for why this
rounding is necessary for consistent results across different machines. See
the note in <code><a href="https://rdrr.io/r/base/print.default.html" class="external-link">print.default</a></code> about <code>digits &gt;=
  16</code>.</p></dd>


<dt id="arg-single-ref">single_ref<a class="anchor" aria-label="anchor" href="#arg-single-ref"></a></dt>
<dd><p>a logical, FALSE by default. If TRUE, then only one
reference between each relation pair is kept when generating foreign key
references. If a pair has multiple references, the kept reference refers to
the earliest key for the child relation, as sorted by priority order.</p></dd>


<dt id="arg-ensure-lossless">ensure_lossless<a class="anchor" aria-label="anchor" href="#arg-ensure-lossless"></a></dt>
<dd><p>a logical, indicating whether to check whether the
normalisation is lossless. If it is not, then an additional relation is
added to the final "database", containing a key for <code>df</code>. This is
enough to make the normalisation lossless.</p></dd>


<dt id="arg-remove-avoidable">remove_avoidable<a class="anchor" aria-label="anchor" href="#arg-remove-avoidable"></a></dt>
<dd><p>a logical, indicating whether to remove avoidable
attributes in relations. If so, then an attribute are removed from
relations if the keys can be changed such that it is not needed to preserve
the given functional dependencies.</p></dd>


<dt id="arg-constants-name">constants_name<a class="anchor" aria-label="anchor" href="#arg-constants-name"></a></dt>
<dd><p>a scalar character, giving the name for any relation
created to store constant attributes. If this is the same as a generated
relation name, it will be changed, with a warning, to ensure that all
relations have a unique name.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>a logical, for whether to display progress to the user during
dependency search in <code><a href="discover.html">discover</a></code>.</p></dd>


<dt id="arg-progress-file">progress_file<a class="anchor" aria-label="anchor" href="#arg-progress-file"></a></dt>
<dd><p>a scalar character or a connection. If <code>progress</code>
is non-zero, determines where the progress is written to, in the same way
as the <code>file</code> argument for <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments passed on to <code><a href="discover.html">discover</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="database.html">database</a></code>, containing the data in <code>df</code> within the
inferred database schema.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Since <code>decompose</code> only works with functional dependencies, not approximate
dependencies, the accuracy in <code>discover</code> is fixed as 1.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># simple example</span></span></span>
<span class="r-in"><span><span class="fu">autodb</span><span class="op">(</span><span class="va">ChickWeight</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> database with 2 relations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 attributes: weight, Time, Chick, Diet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> relation Chick: Chick, Diet; 50 records</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: Chick</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> relation Time_Chick: Time, Chick, weight; 578 records</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   key 1: Time, Chick</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> references:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time_Chick.{Chick} -&gt; Chick.{Chick}</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Webster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

