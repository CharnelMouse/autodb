<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • autodb</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">autodb</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/autodb.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/limits.html">Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/nudge.html">A larger example: the nudge dataset</a></li>
    <li><a class="dropdown-item" href="../articles/null.html">Handling missing values</a></li>
    <li><a class="dropdown-item" href="../articles/plans.html">Planned improvements</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CharnelMouse/autodb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/CharnelMouse/autodb/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="autodb-development-version">autodb (development version)<a class="anchor" aria-label="anchor" href="#autodb-development-version"></a></h2>
<ul><li>Added <code>discover_keys</code>, which searches for keys rather than functional dependencies. This scales better with column count than FD search.</li>
<li>Added <code>rep</code> method for functional dependencies. This also allows the use of <code>outer</code>, e.g. for comparison with <code>==</code>.</li>
<li>Added remaining inequality implementations for <code>functional_dependency</code> (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>).</li>
<li>Added <code>remove_extraneous</code> to exported functions, for removing redundant dependencies or determinant attributes in a <code>functional_dependency</code> object. This is used as a step in <code>synthesise</code>, but is useful on its own.</li>
<li>Added support for data with list columns. <code>duplicate</code>, <code>unique</code> etc. consider data frame rows different if they only differ by <code>NA</code> value classes in list columns. Previously, <code>discover</code> considered them to be equal, so a data frame with list columns could violate its own schema. This is now fixed, in exchange for a small performance hit when there are list columns.</li>
<li>
<code>rejoin</code> no longer sorts as it merges relations, since there might be list columns in the key, which aren’t sortable.</li>
<li>Added nesting to <code>gv</code> and <code>d2</code> methods for classes containing data. This allows giving more detail when a data column is a list where elements have a common class or length.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.4" id="autodb-324">autodb 3.2.4<a class="anchor" aria-label="anchor" href="#autodb-324"></a></h2><p class="text-muted">CRAN release: 2025-11-17</p>
<p>Minor test fixes to work under latest version of testthat.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.3" id="autodb-323">autodb 3.2.3<a class="anchor" aria-label="anchor" href="#autodb-323"></a></h2>
<p>Minor improvements to documentation before submission.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.2" id="autodb-322">autodb 3.2.2<a class="anchor" aria-label="anchor" href="#autodb-322"></a></h2>
<p>Some minor fixes to documentation to pass RHub checks.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.1" id="autodb-321">autodb 3.2.1<a class="anchor" aria-label="anchor" href="#autodb-321"></a></h2>
<p>Some minor fixes to documentation to pass RHub checks.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.0" id="autodb-320">autodb 3.2.0<a class="anchor" aria-label="anchor" href="#autodb-320"></a></h2>
<div class="section level3">
<h3 id="improvements-3-2-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-3-2-0"></a></h3>
<ul><li>Added <code>d2</code>, a converter to the D2 plotting language, similar to <code>gv</code> for GraphViz.</li>
<li>Removed some partial match warnings (thanks to Hadley Wickham for the pull request).</li>
<li>The vignette has been split into several smaller ones, and hopefully is easier to read.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.0" id="autodb-310">autodb 3.1.0<a class="anchor" aria-label="anchor" href="#autodb-310"></a></h2><p class="text-muted">CRAN release: 2025-09-18</p>
<div class="section level3">
<h3 id="improvements-3-1-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-3-1-0"></a></h3>
<ul><li>Changed <code>autoref</code> (and <code>normalise</code>) to spend less time removing extraneous references.</li>
<li>Changed <code>autodb</code> (and optionally <code>database</code>) to not check foreign key references.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.0" id="autodb-300">autodb 3.0.0<a class="anchor" aria-label="anchor" href="#autodb-300"></a></h2><p class="text-muted">CRAN release: 2025-06-25</p>
<div class="section level3">
<h3 id="breaking-changes-3-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-3-0-0"></a></h3>
<ul><li>
<code>discover</code> has a rearranged argument list:
<ul><li>The <code>accuracy</code> argument is now optional, defaulting to one for exact dependency search. This reflects the reduced focus on approximate dependencies: the main <code>autodb</code> function doesn’t allow for them anyway, and the new FDHits search algorithms can only search for exact dependencies.</li>
<li>Arguments specific to the DFD algorithm, including <code>accuracy</code>, have been moved to the back of the list, since they are of lesser priority.</li>
<li>The <code>skip_bijections</code> argument is now first in the DFD-specific arguments, since setting it to the non-default value speeds up the search, whereas doing so for the other non-<code>accuracy</code> parameters slows it down.</li>
</ul></li>
<li>
<code>insert</code> methods no longer allow inserting data with duplicate column names, since this makes the expected result ambiguous.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-3-0-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-3-0-0"></a></h3>
<ul><li>The package has no remaining package dependencies; packages in Suggests are purely used for vignettes or testing. There is still an implicit dependency on GraphViz, if you use <code>gv</code> to export plotting code.</li>
<li>
<code>discover</code> has two variants on the FDHits search algorithm, as alternatives to DFD. FDHitsSep is now the default algorithm, since it’s currently the quickest in general.</li>
<li>Performance improvements:
<ul><li>
<code>relation</code> and <code>database</code> methods for <code>rename_attrs</code> and <code>gv</code> now run significantly more quickly for large data sets, due to not re-running all the key validity checks.</li>
<li>The <code>database</code> method for <code>reduce</code> has unnecessary validity checks removed, so that it runs more quickly, especially for databases with a large number of records.</li>
<li>The <code>database_schema</code> and <code>database</code> methods for <code>[</code> has unnecessary validity checks removed.</li>
<li>
<code>normalise</code> has unnecessary closure calculations removed.</li>
<li>
<code>normalise</code>, <code>synthesise</code>, <code>autoref</code>, and <code>rejoin</code> have improved performance, due to more efficient closure checks.</li>
</ul></li>
<li>
<code>decompose</code> has a new <code>check</code> parameter, to allow skipping some validity checks if the data frame to decompose is the one used to create the schema.</li>
<li>Handing for numerical/complex variables is more consistent:
<ul><li>Values are now rounded by significant digits, as intended, rather than by decimal places.</li>
<li>In addition to <code>autodb</code>, <code>discover</code>, and <code>df_equiv</code>, values are now also rounded for <code>insert</code> and <code>decompose</code>.</li>
</ul></li>
<li>Some <code>relation</code> error messages are more informative.</li>
<li>The <code>database</code> method of <code>reduce</code> has a <code>main</code> argument, like the <code>database_schema</code> method. The previous behaviour, of taking the names of relations with the most records, is <code>main</code>’s default.</li>
<li>
<code>autodb</code>, <code>discover</code>, <code>decompose</code>, and <code>insert</code> have a <code>keep_rownames</code> argument, to allow including the row names as a column, instead of the user including them manually.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-3-0-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-3-0-0"></a></h3>
<ul><li>The <code>format</code> method for <code>relation</code> now describes elements as relations, rather than schemas.</li>
<li>
<code>autodb</code> passes its <code>progress_file</code> argument on to <code>discover</code>; previously it passed ““, so the progress messages for <code>discover</code> were printed to <code>stdout</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.1" id="autodb-231">autodb 2.3.1<a class="anchor" aria-label="anchor" href="#autodb-231"></a></h2><p class="text-muted">CRAN release: 2025-03-19</p>
<p>Some minor changes to tests, as part of re-submission to CRAN.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="autodb-230">autodb 2.3.0<a class="anchor" aria-label="anchor" href="#autodb-230"></a></h2>
<p>Some performance improvements, as part of re-submission to CRAN.</p>
<div class="section level3">
<h3 id="improvements-2-3-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-2-3-0"></a></h3>
<ul><li>Added a convenience function called <code>df_records</code>, for converting a data frame into a list of row values. These are sometimes more useful than data frames, e.g. for checking which rows of a data frame are present in another one.</li>
<li>Improved the run time of <code>database</code> for larger data sets, specifically the validity checks for the data satisfying the foreign key references.</li>
<li>Improved the run time of <code>create</code> for <code>relation_schema</code> and <code>database_schema</code>, by removing validity checks. If the input is valid, these are redundant.</li>
<li>Improved the run time of <code>autodb</code>, by skipping removal of extraneous attributes. This is done on the results of <code>discover</code>, so there won’t be any.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-2-3-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-2-3-0"></a></h3>
<ul><li>CRAN fixes to DESCRIPTION.</li>
<li>Fixes to documentation.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.1" id="autodb-221">autodb 2.2.1<a class="anchor" aria-label="anchor" href="#autodb-221"></a></h2>
<div class="section level3">
<h3 id="fixes-2-2-1">Fixes<a class="anchor" aria-label="anchor" href="#fixes-2-2-1"></a></h3>
<ul><li>CRAN fixes to DESCRIPTION.</li>
<li>Fixes to documentation: the PDF version of the manual is now created successfully.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="autodb-220">autodb 2.2.0<a class="anchor" aria-label="anchor" href="#autodb-220"></a></h2>
<p>Continuing efforts to prepare for submission to CRAN.</p>
<div class="section level3">
<h3 id="improvements-2-2-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-2-2-0"></a></h3>
<ul><li>Changed handling for numerical/complex variables in <code>autodb</code>, <code>discover</code>, and <code>df_equiv</code>, to round to a number of significant digits. Due to the nature of floating-point, and the definition of a functional dependency, floating-point values can’t be compared using equality (<code>==</code>), or by <code>all.equal</code> for the purposes of functional dependency discovery / validation, and have the result be consistent between different machines. Because of this, floating-point variables are now rounded to a small level of precision by default before processing. If the data frame is being loaded from a file, we recommend reading any numerical/complex variables as character values (strings), if it’s appropriate, to avoid loss of precision.</li>
<li>
<code>df_equiv</code> now checks rows for exact matches, outside of the rounding mentioned above. Previously, it compared rows using <code>match</code>, which gave no control over float precision.</li>
<li>
<code>relation_schema</code>, <code>relation</code>, <code>database_schema</code>, and <code>database</code> now only return a name-based subset successfully if all of the given names exist in the object.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.1" id="autodb-211">autodb 2.1.1<a class="anchor" aria-label="anchor" href="#autodb-211"></a></h2>
<p>Some minor changes to documentation and tests, to allow for package updates and submission to CRAN.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="autodb-210">autodb 2.1.0<a class="anchor" aria-label="anchor" href="#autodb-210"></a></h2>
<div class="section level3">
<h3 id="improvements-2-1-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-2-1-0"></a></h3>
<ul><li>Added <code>format</code> and <code>as.data.frame</code> methods for <code>functional_dependency</code>, <code>relation_schema</code>, <code>database_schema</code>, <code>relation</code>, and <code>database</code>. This allows them to be columns in a data frame at initial construction. I’m not sure <em>why</em> you’d want to put them a a data frame column, but it’s consistent with the idea that the objects from these classes should mostly be treatable as vectors. Be warned: they don’t currently work in tibbles.</li>
<li>Added an <code>as.character</code> method for <code>functional_dependency</code>. The optional <code>align_arrows</code> argument can add padding to one side, in order to make the arrows align when they’re printed to different lines. These options are used to align arrows in its <code>print</code> method, and its <code>format</code> method for when printed as a data frame column.</li>
<li>Added <code>==</code> and <code>!=</code> implementations for <code>functional_dependency</code>. These ignore differences in <code>attrs_order</code>: differently-ordered determinant sets are considered equal.</li>
<li>Added a <code>rename_attrs</code> method for <code>functional_dependency</code>.</li>
<li>Added a <code>dependants</code> argument to <code>discover</code>, which limit the functional dependency search to those with a dependant in the given set of column names, defaulting to all of them. This should significantly speed up searches where only some dependants are of interest.</li>
<li>Added a <code>detset_limit</code> argument for <code>discover</code>/<code>autodb</code>, which limits the FD search to only look for dependencies with the determinant set size under a given limit. For DFD, this usually doesn’t significantly reduce the search time, but it won’t make it worse. It will be useful once other search algorithms are implemented.</li>
<li>Added an <code>all</code> argument to <code>insert</code>, <code>FALSE</code> by default. If <code>TRUE</code>, then <code>insert</code> returns an error if the data to insert doesn’t include all attribute for the elements being inserted into, rather than skipping those elements. This helps to prevent accidental no-ops.</li>
<li>Running discover() or autodb() with <code>progress = TRUE</code> now keeps the output display up to date when using a console-based version of R.</li>
<li>DFD now checks for single-attribute keys, and excludes them as determinants in the main search, potentially reducing the search time.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-2-1-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-2-1-0"></a></h3>
<ul><li>Fixed <code>gv</code> to account for Graphviz HTML-like labels requiring certain characters, namely the set “&lt;&gt;&amp;, to be escaped in Graphviz HTML-like labels, and removed completely in attribute values.</li>
<li>Fixed <code>df_equiv</code> to properly handle data frames with zero columns or duplicate rows.</li>
<li>Fixed <code>database_schema</code> and <code>database</code>, and reference re-assignments, to allow references to be given with the referee’s key not in attribute order.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="autodb-200">autodb 2.0.0<a class="anchor" aria-label="anchor" href="#autodb-200"></a></h2>
<p>The general theme for this version is classes for intermediate results: functional dependencies, schemas, and databases now have fleshed-out classes, with methods to keep them self-consistent. They all have their own constructors, for users to create their own, instead of having to generate them from a given data frame.</p>
<div class="section level3">
<h3 id="breaking-changes-2-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-2-0-0"></a></h3>
<ul><li>Renamed <code>dfd</code> to <code>discover</code>, to reflect the generalisation to allow the use of other methods. At the moment, this just includes DFD.</li>
<li>Removed <code>flatten</code> from exported functions, in favour of flattening the functional dependencies in <code>dfd</code>/<code>discover</code> instead. Since <code>flatten</code> was usually called anyway, and its output is more readable since adding a <code>print</code> method for it, there was little reason to keep the old <code>dfd</code>/<code>discover</code> output format, where functional dependencies were grouped by dependant.</li>
<li>Renamed <code>cross_reference</code> to <code>autoref</code>, to better reflect its purpose as generating foreign key references.</li>
<li>Renamed <code>normalise</code> to <code>synthesise</code>, to reflect its only creating relation schemas, not foreign key references. The new function named <code>normalise</code> now calls a wrapper for both <code>synthesise</code> and <code>autoref</code>, since in most cases we don’t need to do these steps separately. Additionally, <code>ensure_lossless</code> is now an argument for <code>synthesise</code> rather than <code>autoref</code>: this is a more nature place to put it, since <code>synthesise</code> creates relations, and <code>autoref</code> adds foreign key references.</li>
<li>As noted in improvements, functional dependency objects now have their own subsetting methods. In particular, they have a <code>[[</code> method, so code that used <code>[[</code> to extract determinant sets or dependants from functional dependencies will no longer work. These should be extracted with the new <code>detset</code> and <code>dependant</code> functions instead.</li>
<li>Similarly, the <code>database</code> class has its own subsetting methods, so components must be extracted with <code>records</code>, <code>keys</code>, and so on.</li>
<li>The <code>database</code> class no longer assigns a <code>parents</code> attribute to each relation, since this duplicates the foreign key reference information given in <code>references</code>.</li>
<li>The <code>database</code> class no longer has a <code>name</code> attribute. This was only used to name the graph when using the <code>gv</code> function, so is now an argument for the <code>database</code> method of <code>gv</code> instead, bringing its arguments into line with those of the other methods.</li>
<li>
<code>relationships</code> in <code>database_schema</code> and <code>database</code> objects are now called <code>references</code>, to better reflect their being foreign key constraints, and they are stored in a format that better reflects this: instead of an element for each pair of attributes in a foreign key, there is one element for the whole foreign key, containing all of the involved attributes. Similarly, they are now printed in the format “child.{c1, c2, …} -&gt; parent.{p1, p2, …}” instead of “child.c1 -&gt; parent.p1; child.c2 -&gt; parent.p2; …”.</li>
<li>
<code>cross_reference</code>/<code>autoref</code> now defaults to generating more than one foreign key reference per parent-child relation pair, rather than keeping only the one with the first child key by priority order. This can result in some confusion on plots, since references are still plotted one attribute pair at a time.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-2-0-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-2-0-0"></a></h3>
<ul><li>Added classes and methods for important data structures:
<ul><li>Added a <code>functional_dependency</code> class for flattened functional dependency sets. The attributes vector is now stored as an attribute, so that the dependencies can be accessed as a simple list without list subsetting operators. There are also <code>detset</code>, <code>dependant</code>, and <code>attrs_order</code> generic functions for extracting the relevant parts. <code>detset</code> and <code>dependant</code>, in particular, should be useful for the purposes of filtering predicates.</li>
<li>Added a <code>relation_schema</code> class for relational schema sets, as returned by <code>synthesise</code>. The attributes and keys are now stored together in a named list, with the <code>attrs_order</code> vector attribute order stored as an attribute. As with the <code>functional_dependency</code>, this lets the schemas be accessed like a vector. There is also <code>merge_empty_keys</code> for combining schemas with an empty key, and <code>attrs</code>, <code>keys</code>, and <code>attrs_order</code> generic functions for extracting the relevant parts.</li>
<li>Added a <code>database_schema</code> class for database schemas, as returned by <code>normalise</code>. This inherits from <code>relation_schema</code>, and has foreign key references as an additional <code>references</code> attribute. There is a <code>merge_empty_keys</code> method that conserves validity of the foreign key references. Additionally, when the names of the contained relation schemas are changed using <code>names&lt;-</code>, the references are changed to use the new names.</li>
<li>Added a <code>relation</code> class for vectors of relations containing data. Since a <code>database_schema</code> is just a <code>relation_schema</code> vector with foreign key references added, the <code>relation</code> class was added as the equivalent underlying vector for the <code>database</code> class. A user of the package probably won’t need to use it.</li>
<li>
<code>database</code> is now a wrapper class around <code>relation</code>, that adds foreign key references, and handles them separately in its methods.</li>
<li>All of the above have their own methods for the <code>[</code>, <code>[[</code>, and – except for <code>functional_dependency</code> – <code>$</code> subsetting operators, along with their replacement equivalents, <code>[&lt;-</code> etc., to allow treating them as vectors of relation schemas or relations. Subsetting also removes any foreign key references in <code>database_schema</code> and <code>database</code> objects that are no longer relevant. These methods prevent the subsetting operators from being used to access the object’s internal components, so many of the generic functions mentioned above were written to allow access in a more principled manner, not requiring knowledge of how the structure is implemented.</li>
<li>All of the above have a <code>c</code> method for vector-like concatenation. There are two non-trivial aspects to this. Firstly, when concatenating objects with different <code>attrs_order</code> attributes, <code>c</code> merges the orders to keep them consistent, if possible. Secondly, for <code>database_schema</code> and <code>database</code>, foreign key references are changed to reflect any changes made to relation names to keep them unique.</li>
<li>All of the above have a <code>unique</code> method for vector-like removal of duplicate schemas / relations. This conserves validity of foreign key references for <code>database_schema</code> and <code>database</code> objects. For <code>relation</code> and <code>database</code> objects, duplication doesn’t require records to be kept in the same order.</li>
</ul></li>
<li>Added some basic database creation/manipulation generic functions for the above data structures:
<ul><li>All of the above have a <code>names&lt;-</code> method for consistently changing relation (schema) names. In particular, for databases and database schemas, this ensures the names are also changed in references.</li>
<li>All of the above, except <code>functional_dependency</code>, have a <code>rename_attrs</code> method for renaming the attributes across the whole object. This renames them in all schemas, relations, references, and so on.</li>
<li>Added a <code>create</code> generic function, for creating <code>relation</code> and <code>database</code> objects from <code>relation_schema</code> and <code>database_schema</code> objects, respectively. The created objects contain no data. This function is roughly the equivalent to <code>CREATE TABLE</code> in SQL, but the vectorised nature of the relation classes means that several tables are created at once.</li>
<li>Added an <code>insert</code> generic function for <code>relation</code> and <code>database</code> objects, which takes a data frame of new data, and inserts it into any relation in the object whose attributes are all present in the new data. This is roughly equivalent to SQL’s <code>INSERT</code>, but works over multiple relations at once, and means there’s now a way to put data into a <code>database</code> outside of <code>decompose</code>. Indeed, <code>decompose</code> is now equivalent to calling <code>create</code>, then calling <code>insert</code> with all the relations.</li>
</ul></li>
<li>Adjusted <code>normalise</code> to prefer to remove dependencies with dependants and determinant sets later in table order, and with larger dependant sets. This brings it more in line with similar decisions made in other package functions.</li>
<li>Simplified some internals of <code>dfd</code>/<code>discover</code> to improve computation time.</li>
<li>Added a <code>skip_bijections</code> option to <code>dfd</code>/<code>discover</code>, to speed up functional dependency searches where there are pairwise-equivalent attributes present.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-2-0-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-2-0-0"></a></h3>
<ul><li>Corrected vignette re: when to remove spurious dependencies before.</li>
<li>Corrected <code>autodb</code> documentation link to page with database format information.</li>
<li>Corrected <code>df_equiv</code> to work with <code>data.frame</code> columns that are lists.</li>
<li>Fixed several issues related to doubles / floating-point:
<ul><li>Fixed <code>dfd</code>/<code>discover</code> treating similar numeric values as equal, resulting in data frames not being insertable into their own schema.</li>
<li>Fixed <code>database</code> checks not handling doubles correctly. Specifically, foreign key reference checks involve merging tables together, and merge operates on doubles with a tolerance that’s set within an internal method, so merges can create duplicates that need to be removed afterwards.</li>
<li>Similarly, fixed <code>rejoin</code> in the case where merges are based on doubles, sometimes resulting in duplicates.</li>
</ul></li>
<li>Fixed <code>normalise</code>’s return output to be invariant to the given order of the <code>functional_dependency</code> input.</li>
<li>Fixed <code>normalise</code> returning relations with attributes in the wrong order in certain cases where <code>remove_avoidable = TRUE</code>.</li>
<li>Fixed <code>gv</code> giving Graphviz code that could result in incorrect diagrams: relation and attribute names were converted to lower case, and not checked for uniqueness afterwards. This could result in incorrect foreign key references being drawn. The fix also accounts for a current bug in Graphviz, where edges between HTML-style node ports ignore case for the port labels.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="autodb-110">autodb 1.1.0<a class="anchor" aria-label="anchor" href="#autodb-110"></a></h2>
<ul><li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
</ul><div class="section level3">
<h3 id="improvements-1-1-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-1-1-0"></a></h3>
<ul><li>Added examples for <code>autodb</code>, <code>dfd</code>, <code>gv</code>, and <code>rejoin</code>.</li>
<li>Added a reference for removing avoidable attributes for enhanced third normal form.</li>
<li>Changed <code>decompose</code> to return an error if the data.frame doesn’t satisfy the functional dependencies implied by the schema. This will return an error when using <code>decompose</code> with a schema derived from the same data.frame if any approximate dependencies were included. Previously, using <code>decompose</code> or <code>dfd</code> with approximate dependencies would result in constructing a database with duplicate key values, since there’s currently no handling of approximate dependencies during database construction, and records ignored in approximate dependencies were being kept. This is incorrect behaviour; <code>decompose</code> will be added back for approximate dependencies once the package can properly handle them.</li>
<li>Made <code>reduce</code> generic, and added a method for database schemas. Currently this method requires explicitly naming the main relations, rather than inferring them.</li>
<li>Removed incorrect comment in vignette about needing foreign keys to reconstruct the original data frame from a database.</li>
<li>Tidied up <code>nudge</code> data documentation, improved commentary on publication references in vignette.</li>
<li>Removed accuracy argument from <code>autodb</code>, due to approximate dependencies now returning an error in <code>decompose</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-1-1-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-1-1-0"></a></h3>
<ul><li>Fixed <code>print.database</code> to refer to records instead of rows.</li>
<li>Fixed existing reference formatting.</li>
<li>Fixed references for missing-value implementation mockup in vignette.</li>
<li>Fixed a bug in <code>normalise</code> that resulted in relations having duplicate keys.</li>
<li>Fixed a bug in <code>normalise</code>, that resulted in schemas that didn’t reproduce the given functional dependencies.</li>
<li>Fixed <code>dfd</code>’s data simplification step for POSIXct datetimes, in case where two times only differ by standard/daylight-savings time (e.g. 1:00:00 EST vs. 1:00:00 EDT on the same day).</li>
<li>Fixed a bug in <code>dfd</code> with cache = TRUE, where data frame column names being argument names for <code>paste</code> can result in an error.</li>
<li>Fixed decomposition for tables with zero columns (TABLE_DUM and TABLE_DEE) to allow lossless rejoin.</li>
<li>Fixed a bug where the output of <code>gv</code> methods included Graphviz syntax errors when given relations with zero-length names. <code>gv.data.frame</code> now requires <code>name</code> to be non-empty; <code>gv.database_schema</code> and <code>gv.database</code> replace zero-length names.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="autodb-100">autodb 1.0.0<a class="anchor" aria-label="anchor" href="#autodb-100"></a></h2>
<ul><li>Initial version</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Webster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

