<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A larger example: the nudge dataset • autodb</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A larger example: the nudge dataset">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">autodb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/autodb.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/limits.html">Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/nudge.html">A larger example: the nudge dataset</a></li>
    <li><a class="dropdown-item" href="../articles/null.html">Handling missing values</a></li>
    <li><a class="dropdown-item" href="../articles/plans.html">Planned improvements</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CharnelMouse/autodb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="nudge_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="nudge_files/viz-1.8.2/viz.js"></script><link href="nudge_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="nudge_files/grViz-binding-1.0.11/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A larger example: the nudge dataset</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CharnelMouse/autodb/blob/master/vignettes/nudge.Rmd" class="external-link"><code>vignettes/nudge.Rmd</code></a></small>
      <div class="d-none name"><code>nudge.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://charnelmouse.github.io/autodb/">autodb</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'autodb'</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     decompose</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"DiagrammeR"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">show</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">DiagrammeR</span><span class="fu">::</span><span class="fu"><a href="https://rich-iannone.github.io/DiagrammeR/reference/grViz.html" class="external-link">grViz</a></span><span class="op">(</span><span class="fu"><a href="../reference/gv.html">gv</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span></span>
<span>  <span class="va">maybe_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">DiagrammeR</span><span class="fu">::</span><span class="fu"><a href="https://rich-iannone.github.io/DiagrammeR/reference/grViz.html" class="external-link">grViz</a></span><span class="op">(</span><span class="fu"><a href="../reference/gv.html">gv</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="kw">else</span><span class="op">{</span></span>
<span>  <span class="va">show</span> <span class="op">&lt;-</span> <span class="va">print</span></span>
<span>  <span class="va">maybe_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Included in the package is a 447-by-25 data frame called
<code>nudge</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  attribute <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nudge</span><span class="op">)</span>,</span>
<span>  class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">nudge</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  NAs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">nudge</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  row.names <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">attribute</th>
<th align="left">class</th>
<th align="right">NAs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">publication_id</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">study_id</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">es_id</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">reference</td>
<td align="left">character</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">title</td>
<td align="left">character</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">year</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">location</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">domain</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">intervention_category</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">intervention_technique</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">type_experiment</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">population</td>
<td align="left">factor</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">n_study</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">n_comparison</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">n_control</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">n_intervention</td>
<td align="left">integer</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">binary_outcome</td>
<td align="left">logical</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">mean_control</td>
<td align="left">numeric</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">sd_control</td>
<td align="left">numeric</td>
<td align="right">286</td>
</tr>
<tr class="even">
<td align="left">mean_intervention</td>
<td align="left">numeric</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">sd_intervention</td>
<td align="left">numeric</td>
<td align="right">286</td>
</tr>
<tr class="even">
<td align="left">cohens_d</td>
<td align="left">numeric</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">variance_d</td>
<td align="left">numeric</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">approximation</td>
<td align="left">logical</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">wansink</td>
<td align="left">logical</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>This is the data set for a meta-analysis, looking at the
effectiveness of “nudge” interventions. Like any meta-analysis, the data
is strictly hierarchical: publications contain studies, which contain
effect size measurements. We expect to see this hierarchy in the
normalisation.</p>
<div class="section level2">
<h2 id="initial-decomposition">Initial decomposition<a class="anchor" aria-label="anchor" href="#initial-decomposition"></a>
</h2>
<p>The full dependency information for this data is rather large. This
results in a relatively large search time for a data set of this size,
but it still only takes a few seconds.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_deps_big</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/discover.html">discover</a></span><span class="op">(</span><span class="va">nudge</span><span class="op">)</span></span>
<span><span class="va">nudge_schema_big</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/normalise.html">normalise</a></span><span class="op">(</span><span class="va">nudge_deps_big</span>, remove_avoidable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">nudge_db_big</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decompose.html">decompose</a></span><span class="op">(</span><span class="va">nudge</span>, <span class="va">nudge_schema_big</span><span class="op">)</span></span></code></pre></div>
<p>However, the resulting schema is hard to make anything out of, with
more relations than we’d want to go through manually:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">nudge_schema_big</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 473</span></span></code></pre>
<p>There are a few reasons for this, but the main one is the sheer
number of functional dependencies discovered:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3732</span></span></code></pre>
<p>Even if we remove the transitive dependencies, which are implied by
the others, we still have 597 dependencies.</p>
</div>
<div class="section level2">
<h2 id="simplifying-the-search-result">Simplifying the search result<a class="anchor" aria-label="anchor" href="#simplifying-the-search-result"></a>
</h2>
<p>This is a rather large set for the simple approach to simplifying a
set of FDs: manually looking for spurious cases to remove before
normalisation.</p>
<p>As a hack, we can use <code>reduce</code> on the database. This finds
the relations with the most records – i.e. the relations with one record
for each unique row in the original data – and returns a reduced
database, containing only those relations, and relations that they
reference, either directly or indirectly.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_reduced_big</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">nudge_db_big</span><span class="op">)</span></span></code></pre></div>
<p>The relations removed by <code>reduce</code> are often spurious, but
not always: see the reference chains section of the <a href="plans.html">Planned improvements</a> vignette
(<code><a href="../articles/plans.html">vignette("plans", package = "autodb")</a></code>) for an example of
non-spurious tables not being connected. However, <code>reduce</code> at
least gives us something smaller to look at.</p>
<p>In this case, the reduced database is still too large to easily
review:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">nudge_reduced_big</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 124</span></span></code></pre>
<p>Instead, we get a grip on what’s going on by collecting statistics on
attributes involved in the determinants.</p>
<p>For example, we can also see how large the determinants are:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##   1   2   3   4   5   6   7 </span></span>
<span><span class="co">##  41 545 780 993 926 435  12</span></span></code></pre>
<p>While there are some large true determinants in real data, a common
rule of thumb is that FDs with larger determinants are more likely to be
spurious. This doesn’t make for an obvious way to filter the FDs with
some hard size limit, though.</p>
<p>We can also see how often each attribute appears in a
determinant:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##           n_comparison        type_experiment  intervention_category </span></span>
<span><span class="co">##                   1095                   1085                   1061 </span></span>
<span><span class="co">##              n_control                 domain         n_intervention </span></span>
<span><span class="co">##                   1029                   1016                    993 </span></span>
<span><span class="co">##                   year          approximation intervention_technique </span></span>
<span><span class="co">##                    889                    766                    745 </span></span>
<span><span class="co">##               location             variance_d        sd_intervention </span></span>
<span><span class="co">##                    739                    727                    687 </span></span>
<span><span class="co">##             sd_control                n_study               cohens_d </span></span>
<span><span class="co">##                    684                    628                    549 </span></span>
<span><span class="co">##         binary_outcome           mean_control      mean_intervention </span></span>
<span><span class="co">##                    503                    370                    313 </span></span>
<span><span class="co">##             population                wansink         publication_id </span></span>
<span><span class="co">##                    269                    248                    119 </span></span>
<span><span class="co">##              reference                  title               study_id </span></span>
<span><span class="co">##                    108                     83                     37 </span></span>
<span><span class="co">##                  es_id </span></span>
<span><span class="co">##                     24</span></span></code></pre>
<p>We can be more specific, and see how often each attributes appears in
a determinant of a given size:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sort_by_rowSums</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span>, , drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span>
<span><span class="va">level_table</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">levels</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">levels</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">attrs_table</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">level_table</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nudge</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">by_lengths</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">f</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">cbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">by_lengths</span><span class="op">(</span><span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span>, <span class="va">attrs_table</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sort_by_rowSums</span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                         1   2   3   4   5   6  7</span></span>
<span><span class="co">## n_comparison            0  73  64 342 395 217  4</span></span>
<span><span class="co">## type_experiment         0   6 114 286 376 295  8</span></span>
<span><span class="co">## intervention_category   0   2 140 185 389 341  4</span></span>
<span><span class="co">## n_control               0  53 148 305 361 162  0</span></span>
<span><span class="co">## domain                  0  23 109 335 453  84 12</span></span>
<span><span class="co">## n_intervention          0  64 142 283 290 206  8</span></span>
<span><span class="co">## year                    0  11 266 408 192  12  0</span></span>
<span><span class="co">## approximation           0   0  35 125 317 277 12</span></span>
<span><span class="co">## intervention_technique  1  25 124 309 249  37  0</span></span>
<span><span class="co">## location                0   4  91 191 259 182 12</span></span>
<span><span class="co">## variance_d              0  76 201 241 164  45  0</span></span>
<span><span class="co">## sd_intervention         0  15  65 228 227 148  4</span></span>
<span><span class="co">## sd_control              0  12  65 228 227 148  4</span></span>
<span><span class="co">## n_study                 0  60  81 224 182  77  4</span></span>
<span><span class="co">## cohens_d                0 211 258  23  46  11  0</span></span>
<span><span class="co">## binary_outcome          0   3  20  74 225 177  4</span></span>
<span><span class="co">## mean_control            1  89 196  59  25   0  0</span></span>
<span><span class="co">## mean_intervention       1 103 141  46  22   0  0</span></span>
<span><span class="co">## population              0   0   7  38 112 104  8</span></span>
<span><span class="co">## wansink                 0   0   0  42 119  87  0</span></span>
<span><span class="co">## publication_id          0  97  22   0   0   0  0</span></span>
<span><span class="co">## reference               1  85  22   0   0   0  0</span></span>
<span><span class="co">## title                   3  58  22   0   0   0  0</span></span>
<span><span class="co">## study_id               10  20   7   0   0   0  0</span></span>
<span><span class="co">## es_id                  24   0   0   0   0   0  0</span></span></code></pre>
<p>Either way, we can see that there are attributes that we wouldn’t
expect to be in a determinant, but often are, especially in larger ones.
We don’t expect measurement attributes like <code>variance_d</code> and
<code>sd_control</code> to co-determine anything else, but they often
do.</p>
<p>More generally, there are certain data classes we don’t expect to see
appear as determinants. For example, numerics (floats) are probably
measurements, and shouldn’t co-determine anything else. However, if we
count determinant appearances by the attribute’s class, we find that
they often appear in determinants:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">attr_classes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">nudge</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">class_table</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">level_table</span><span class="op">(</span><span class="va">attr_classes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">attr_classes</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">by_lengths</span><span class="op">(</span><span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span>, <span class="va">class_table</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sort_by_rowSums</span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            1   2   3    4    5    6  7</span></span>
<span><span class="co">## factor     1  60 585 1344 1838 1043 44</span></span>
<span><span class="co">## integer   34 378 730 1562 1420  674 16</span></span>
<span><span class="co">## numeric    2 506 926  825  711  352  8</span></span>
<span><span class="co">## logical    0   3  55  241  661  541 16</span></span>
<span><span class="co">## character  4 143  44    0    0    0  0</span></span></code></pre>
<p>This suggests that a simple first step is to remove any FD with a
float in the determinant. We can write this as a filter vector:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">det_nofloat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">)</span>,</span>
<span>  \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">attr_classes</span><span class="op">[</span><span class="va">x</span><span class="op">]</span> <span class="op">!=</span> <span class="st">"numeric"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">det_nofloat</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Mode   FALSE    TRUE </span></span>
<span><span class="co">## logical    2784     948</span></span></code></pre>
<p>This removes a lot!</p>
<p>If we use the filtered set of FDs, we still get a large schema:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="../reference/normalise.html">normalise</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">[</span><span class="va">det_nofloat</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 176</span></span></code></pre>
<p>However, if we reduce the resulting database, we get something much
more manageable:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_schema_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/normalise.html">normalise</a></span><span class="op">(</span><span class="va">nudge_deps_big</span><span class="op">[</span><span class="va">det_nofloat</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">nudge_db_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="fu"><a href="../reference/decompose.html">decompose</a></span><span class="op">(</span><span class="va">nudge</span>, <span class="va">nudge_schema_filtered</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference (212 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">title (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_location\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_location (217 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_domain\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_domain (220 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference_type_experiment (230 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_n_study (311 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_location_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_location_n_study (314 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_domain_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_domain_n_study (317 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique_n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique_n_comparison_n_control (391 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"title\":FROM_reference -> \"reference\":TO_reference;\n  \"reference_type_experiment\":FROM_reference -> \"reference\":TO_reference;\n  \"publication_id_location\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_location\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_domain\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_domain\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_type_experiment\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_type_experiment\":FROM_reference -> \"title\":TO_reference;\n  \"intervention_technique_n_comparison_n_control\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_location\":TO_publication_id;\n  \"publication_id_n_study\":FROM_location -> \"publication_id_location\":TO_location;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_domain\":TO_publication_id;\n  \"publication_id_n_study\":FROM_domain -> \"publication_id_domain\":TO_domain;\n  \"publication_id_n_study\":FROM_reference -> \"publication_id_domain\":TO_reference;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"publication_id_type_experiment\":FROM_reference -> \"reference_type_experiment\":TO_reference;\n  \"publication_id_type_experiment\":FROM_type_experiment -> \"reference_type_experiment\":TO_type_experiment;\n  \"year_location_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_location_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"year_domain_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_domain_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n  \"publication_id_n_study\":FROM_year -> \"year_location_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_location -> \"year_location_n_study\":TO_location;\n  \"publication_id_n_study\":FROM_n_study -> \"year_location_n_study\":TO_n_study;\n  \"publication_id_n_study\":FROM_year -> \"year_domain_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_domain -> \"year_domain_n_study\":TO_domain;\n  \"publication_id_n_study\":FROM_n_study -> \"year_domain_n_study\":TO_n_study;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique_n_comparison_n_control\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"intervention_technique_n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"intervention_technique_n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>Let’s look at the resulting relations, in two sets. Here’s the
left-hand set:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">subsample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"es_id"</span>,</span>
<span>  <span class="st">"study_id"</span>,</span>
<span>  <span class="st">"intervention_technique_n_comparison_n_control"</span>,</span>
<span>  <span class="st">"intervention_technique"</span>,</span>
<span>  <span class="st">"n_comparison_n_control"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">[</span><span class="va">subsample</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique_n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique_n_comparison_n_control (391 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"intervention_technique_n_comparison_n_control\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique_n_comparison_n_control\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"intervention_technique_n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"intervention_technique_n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>We see two relations, <code>es_id</code> and <code>study_id</code>,
that clearly represent the effect and study levels of the data
hierarchy, which is encouraging. They both contain the ID for the next
level, too, as they should.</p>
<p>The relation that the effect relation references, with the long name,
looks rather arbitrary, but the relations it references look useful. One
shows that the intervention technique determines the intervention
category, i.e. techniques are subcategories.</p>
<p>Less simply, the other relation contains the three effect sample
sizes: comparison size, intervention arm size, and control arm size.
Each pair of these sizes determines the other, which is what we’d see if
the comparison size is the sum of the other two. However, we can’t
assume that this is the nature of the relationship. Indeed, we can find
a case where it’s false:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span>    <span class="va">nudge</span>,</span>
<span>    <span class="va">n_comparison</span> <span class="op">!=</span> <span class="va">n_control</span> <span class="op">+</span> <span class="va">n_intervention</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">reference</span>, <span class="va">study_id</span>, <span class="va">es_id</span>, <span class="va">n_study</span>, <span class="va">n_comparison</span>, <span class="va">n_control</span>, <span class="va">n_intervention</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  row.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="29%">
<col width="10%">
<col width="6%">
<col width="9%">
<col width="15%">
<col width="11%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="left">reference</th>
<th align="right">study_id</th>
<th align="right">es_id</th>
<th align="right">n_study</th>
<th align="right">n_comparison</th>
<th align="right">n_control</th>
<th align="right">n_intervention</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Hedlin &amp; Sunstein (2016)</td>
<td align="right">137</td>
<td align="right">180</td>
<td align="right">1037</td>
<td align="right">1037</td>
<td align="right">345</td>
<td align="right">346</td>
</tr>
<tr class="even">
<td align="left">Hedlin &amp; Sunstein (2016)</td>
<td align="right">137</td>
<td align="right">181</td>
<td align="right">1037</td>
<td align="right">1037</td>
<td align="right">345</td>
<td align="right">346</td>
</tr>
</tbody>
</table>
<p>It turns out to be difficult to identify which results in the
relevant paper these are referring to, since the presentation of the
results is rather obfuscated. However, it is clear that these are
referring to a part of the study with three arms instead of two
(actually nine arms aggregated to groups of three). If we account for
having two treatment arms, then the arm sizes do sum to the comparison
size, and there is still a sum relationship of sorts, just not the
simpler one we might expect.</p>
<p>In any case, most of these relations in this set seem reasonable. The
same can’t be said of the other set, which should represent the
publication-level data:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">)</span>, <span class="va">subsample</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"reference\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference (212 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">title (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_location\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_location (217 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_domain\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_domain (220 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference_type_experiment (230 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_n_study (311 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_location_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_location_n_study (314 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_domain_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_domain_n_study (317 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"title\":FROM_reference -> \"reference\":TO_reference;\n  \"reference_type_experiment\":FROM_reference -> \"reference\":TO_reference;\n  \"publication_id_location\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_location\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_domain\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_domain\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_type_experiment\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_type_experiment\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_location\":TO_publication_id;\n  \"publication_id_n_study\":FROM_location -> \"publication_id_location\":TO_location;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_domain\":TO_publication_id;\n  \"publication_id_n_study\":FROM_domain -> \"publication_id_domain\":TO_domain;\n  \"publication_id_n_study\":FROM_reference -> \"publication_id_domain\":TO_reference;\n  \"publication_id_type_experiment\":FROM_reference -> \"reference_type_experiment\":TO_reference;\n  \"publication_id_type_experiment\":FROM_type_experiment -> \"reference_type_experiment\":TO_type_experiment;\n  \"year_location_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_location_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"year_domain_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_domain_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"publication_id_n_study\":FROM_year -> \"year_location_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_location -> \"year_location_n_study\":TO_location;\n  \"publication_id_n_study\":FROM_n_study -> \"year_location_n_study\":TO_n_study;\n  \"publication_id_n_study\":FROM_year -> \"year_domain_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_domain -> \"year_domain_n_study\":TO_domain;\n  \"publication_id_n_study\":FROM_n_study -> \"year_domain_n_study\":TO_n_study;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>There is a lot going on here, so let’s look at the last two:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>, <span class="st">"reference"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-febe03efa1a2d8d52a86" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">title (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference (212 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"title\":FROM_reference -> \"reference\":TO_reference;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>This is our publication-level data, but something is wrong. The
publication ID is not a simple key, as we’d expect. Neither is the
reference, which we’d expect to be unique, otherwise the bibliography
will have duplicate entries. Instead, the only simple key is the
publication’s title. To use the ID or the reference as an identifier for
publications, we need to use both together as a compound key.</p>
<p>Without having looked at the data itself, these keys tell us that
there are duplicate publication IDs and duplicate references. Since the
keys for the <code>title</code> relation showed us the problem, we can
search that relation to find the duplicates, with all the attributes
needed for context:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">duplicates</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">subset_duplicates</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">attr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">[[</span><span class="va">attr</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu">duplicates</span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="va">attr</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, , drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_title_relation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/records.html">records</a></span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">)</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">subset_duplicates</span><span class="op">(</span><span class="va">nudge_title_relation</span>, <span class="st">"publication_id"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="62%">
<col width="12%">
<col width="17%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">title</th>
<th align="right">publication_id</th>
<th align="left">reference</th>
<th align="right">year</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">44</td>
<td align="left">Enhanced active choice: A new method to motivate
behavior change</td>
<td align="right">95</td>
<td align="left">Keller et al. (2011)</td>
<td align="right">2011</td>
</tr>
<tr class="even">
<td align="left">130</td>
<td align="left">Nudging product choices: The effect of position change
on snack bar choice</td>
<td align="right">95</td>
<td align="left">Keller et al. (2015)</td>
<td align="right">2015</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">subset_duplicates</span><span class="op">(</span><span class="va">nudge_title_relation</span>, <span class="st">"reference"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="72%">
<col width="11%">
<col width="9%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">title</th>
<th align="right">publication_id</th>
<th align="left">reference</th>
<th align="right">year</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">214</td>
<td align="left">Nudge vs superbugs: A behavioural economics trial to
reduce the overprescribing of antibiotics</td>
<td align="right">18</td>
<td align="left">BETA (2018)</td>
<td align="right">2018</td>
</tr>
<tr class="even">
<td align="left">399</td>
<td align="left">Energy labels that make cents</td>
<td align="right">19</td>
<td align="left">BETA (2018)</td>
<td align="right">2018</td>
</tr>
</tbody>
</table>
<p>The publications with the same ID have the same first author in their
references; this looks like a simple data entry error.</p>
<p>BETA is the Behavioural Economics Team of the Australian Government,
so it’s not surprising that they’d have multiple publications/reports
per year. However the references for publications were generated, the
possibility of a group publishing multiple relevant papers in a year
wasn’t accounted for.</p>
<p>Looking at the keys for the other relations, we see that they often
include <code>publication_id</code> or <code>reference</code>, and the
relationships they describe seem rather questionable. These are not
worth going into in detail, since we can guess that they stem from the
duplication problems.</p>
<p>In a real project, this would be a good point to go back to the data
provider with questions, since we now have examples from the data of
surprising behaviour.</p>
</div>
<div class="section level2">
<h2 id="fixing-the-data">Fixing the data<a class="anchor" aria-label="anchor" href="#fixing-the-data"></a>
</h2>
<p>There are two ideal results when we find surprising behaviour:</p>
<ul>
<li>The behaviour is as it should be, and we can correct our
understanding of the data;</li>
<li>The behaviour is unexpected, and we can fix the data to get rid of
it.</li>
</ul>
<p>In this example, <code>publication_id</code> and
<code>reference</code> are synthetic variables, so we can easily fix the
data ourselves:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">nudge</span>, <span class="op">{</span></span>
<span>  <span class="va">publication_id</span><span class="op">[</span><span class="va">publication_id</span> <span class="op">==</span> <span class="fl">95</span> <span class="op">&amp;</span> <span class="va">year</span> <span class="op">==</span> <span class="fl">2015</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">publication_id</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1L</span></span>
<span>  <span class="va">reference</span><span class="op">[</span><span class="va">publication_id</span> <span class="op">==</span> <span class="fl">19</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"BETA (2018a)"</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>We can then re-run <code>autodb</code> to find the new schema. Note
that we use the <code>exclude_class</code> argument to exclude FDs with
floats in their determinants, instead of removing them ourselves. This
prunes them from the search space, speeding up the search.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autodb.html">autodb</a></span><span class="op">(</span></span>
<span>  <span class="va">nudge_fixed</span>,</span>
<span>  exclude_class <span class="op">=</span> <span class="st">"numeric"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">db_fixed</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 170</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">db_fixed</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-1fb4450895fe099f74a1" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"publication_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_n_study (311 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_location_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_location_n_study (314 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_domain_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_domain_n_study (317 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique_n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique_n_comparison_n_control (391 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"publication_id_type_experiment\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"intervention_technique_n_comparison_n_control\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"year_location_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_location_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"year_domain_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_domain_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n  \"publication_id_n_study\":FROM_year -> \"year_location_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_location -> \"year_location_n_study\":TO_location;\n  \"publication_id_n_study\":FROM_n_study -> \"year_location_n_study\":TO_n_study;\n  \"publication_id_n_study\":FROM_year -> \"year_domain_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_domain -> \"year_domain_n_study\":TO_domain;\n  \"publication_id_n_study\":FROM_n_study -> \"year_domain_n_study\":TO_n_study;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique_n_comparison_n_control\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"intervention_technique_n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"intervention_technique_n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>This is an improvement: the publications now have an ID and a
reference as simple keys, as they should, and some of the questionable
relations have disappeared.</p>
</div>
<div class="section level2">
<h2 id="simplifying-further-with-search-filters">Simplifying further with search filters<a class="anchor" aria-label="anchor" href="#simplifying-further-with-search-filters"></a>
</h2>
<p>Some of the relations are still questionable. If we examine them, we
see that they all have large keys, containing three attributes or more.
To simplify things, we can decide to remove them. Rather than manually
filter the FDs again, we can do this using another filtering argument
for <code>discover</code>/<code>autodb</code>,
<code>detset_limit</code>:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autodb.html">autodb</a></span><span class="op">(</span></span>
<span>  <span class="va">nudge_fixed</span>,</span>
<span>  exclude_class <span class="op">=</span> <span class="st">"numeric"</span>,</span>
<span>  detset_limit <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">db_final</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 11</span></span></code></pre>
<p>The database is now small enough to not need to reduce it:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">db_final</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-10b3b7155e8045a1b2ad" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"publication_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_comparison\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_n_comparison (383 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_n_control (328 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_intervention\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_n_intervention (378 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_n_study (311 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"publication_id_type_experiment\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"publication_id_n_control\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"publication_id_n_intervention\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"publication_id_n_comparison\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"publication_id_n_comparison\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>However, the relations not referred to by the effect relation look
spurious too, so we can reduce the database to remove them too:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">db_final</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-4018eef1a407a0df6b52" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"publication_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"publication_id_type_experiment\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>This is a great improvement. We are left with only two relations that
we don’t expect in general, but hold for this dataset in particular:</p>
<ul>
<li>
<code>publication_id_type_experiment</code> states that studies from
the same publication, that use the same type of experiment, also take
place in the same location. This is probably not interesting, since the
“location” is just a logical value for whether the study was conducted
in the USA.</li>
<li>
<code>publication_id_n_study</code> states that studies from the
same publication, and with the same sample size, have the same location,
domain, and target population. This is likely to be a coincidence, and
not of much interest either.</li>
</ul>
<p>Dataset-particular relations like this are useful to check, since
they often indicate sampling limitations, which can make our planned
statistical analysis infeasible.</p>
<p>We can remove either of these relations easily using
<code>exclude</code>, since their keys contain attributes that don’t
appear in keys elsewhere. If we do, we get a schema that looks
reasonable for data of this sort in general, apart from the mentioned
issue with the effect sample sizes:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="fu"><a href="../reference/autodb.html">autodb</a></span><span class="op">(</span></span>
<span>  <span class="va">nudge_fixed</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"type_experiment"</span>, <span class="st">"n_study"</span><span class="op">)</span>,</span>
<span>  exclude_class <span class="op">=</span> <span class="st">"numeric"</span>,</span>
<span>  detset_limit <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-5b1b2f4ad92281566982" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-5b1b2f4ad92281566982">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"publication_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"study_id\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="how-not-to-remove-spurious-structure">How not to remove spurious structure<a class="anchor" aria-label="anchor" href="#how-not-to-remove-spurious-structure"></a>
</h2>
<p>Instead of adding search filters, or removing functional
dependencies, we could try to simplify the original schema by removing
questionable relations. This section is about why this is a bad
idea.</p>
<p>This is the database we had:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_db_filtered</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-25c3e940e6859592f801" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-25c3e940e6859592f801">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference (212 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">title (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_location\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_location (217 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_domain\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_domain (220 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference_type_experiment (230 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_n_study (311 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_location_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_location_n_study (314 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_domain_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">year_domain_n_study (317 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique_n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique_n_comparison_n_control (391 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"title\":FROM_reference -> \"reference\":TO_reference;\n  \"reference_type_experiment\":FROM_reference -> \"reference\":TO_reference;\n  \"publication_id_location\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_location\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_domain\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_domain\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_type_experiment\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_type_experiment\":FROM_reference -> \"title\":TO_reference;\n  \"intervention_technique_n_comparison_n_control\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_location\":TO_publication_id;\n  \"publication_id_n_study\":FROM_location -> \"publication_id_location\":TO_location;\n  \"publication_id_n_study\":FROM_publication_id -> \"publication_id_domain\":TO_publication_id;\n  \"publication_id_n_study\":FROM_domain -> \"publication_id_domain\":TO_domain;\n  \"publication_id_n_study\":FROM_reference -> \"publication_id_domain\":TO_reference;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"publication_id_type_experiment\":FROM_reference -> \"reference_type_experiment\":TO_reference;\n  \"publication_id_type_experiment\":FROM_type_experiment -> \"reference_type_experiment\":TO_type_experiment;\n  \"year_location_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_location_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"year_domain_n_study\":FROM_year -> \"year_n_study\":TO_year;\n  \"year_domain_n_study\":FROM_n_study -> \"year_n_study\":TO_n_study;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"intervention_technique_n_comparison_n_control\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n  \"publication_id_n_study\":FROM_year -> \"year_location_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_location -> \"year_location_n_study\":TO_location;\n  \"publication_id_n_study\":FROM_n_study -> \"year_location_n_study\":TO_n_study;\n  \"publication_id_n_study\":FROM_year -> \"year_domain_n_study\":TO_year;\n  \"publication_id_n_study\":FROM_domain -> \"year_domain_n_study\":TO_domain;\n  \"publication_id_n_study\":FROM_n_study -> \"year_domain_n_study\":TO_n_study;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique_n_comparison_n_control\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"intervention_technique_n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"intervention_technique_n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>What happens if we remove the offending relations from the
schema?</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_schema_relfiltered</span> <span class="op">&lt;-</span> <span class="va">nudge_schema_filtered</span><span class="op">[</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/keys.html">keys</a></span><span class="op">(</span><span class="va">nudge_schema_filtered</span><span class="op">)</span>,</span>
<span>    \<span class="op">(</span><span class="va">ks</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">ks</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"publication_id"</span>, <span class="st">"reference"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">ks</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">]</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">nudge_schema_relfiltered</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-3f27c09be0c60bb52829" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-3f27c09be0c60bb52829">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">study_id<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD PORT=\"FROM_study_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD PORT=\"FROM_publication_id\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD PORT=\"FROM_type_experiment\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD PORT=\"FROM_n_study\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">es_id<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD PORT=\"FROM_es_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD PORT=\"FROM_study_id\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD PORT=\"FROM_intervention_technique\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD PORT=\"FROM_n_comparison\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD PORT=\"FROM_n_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD PORT=\"FROM_binary_outcome\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD PORT=\"FROM_mean_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD PORT=\"FROM_sd_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD PORT=\"FROM_mean_intervention\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD PORT=\"FROM_sd_intervention\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD PORT=\"FROM_cohens_d\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD PORT=\"FROM_variance_d\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">title<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_title\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">intervention_technique<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD PORT=\"FROM_intervention_technique\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD PORT=\"FROM_intervention_category\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">year_n_study<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD PORT=\"FROM_year\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD PORT=\"FROM_n_study\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD PORT=\"FROM_wansink\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">n_comparison_n_control<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_control\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>The offending relations are removed, but so are any foreign key
references involving them. The resulting schema isn’t invalid, but it’s
less connected than before.</p>
<p>Calling <code>autoref</code> to re-generate the foreign key
references doesn’t entirely fix the problem, since, for example, no
other relation contains a key for the <code>title</code> relation:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="../reference/autoref.html">autoref</a></span><span class="op">(</span><span class="va">nudge_schema_relfiltered</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-416566eb193bf50d04e6" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-416566eb193bf50d04e6">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">study_id<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD PORT=\"FROM_study_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD PORT=\"FROM_publication_id\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD PORT=\"FROM_type_experiment\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD PORT=\"FROM_n_study\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">es_id<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD PORT=\"FROM_es_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD PORT=\"FROM_study_id\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD PORT=\"FROM_intervention_technique\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD PORT=\"FROM_n_comparison\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD PORT=\"FROM_n_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD PORT=\"FROM_binary_outcome\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD PORT=\"FROM_mean_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD PORT=\"FROM_sd_control\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD PORT=\"FROM_mean_intervention\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD PORT=\"FROM_sd_intervention\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD PORT=\"FROM_cohens_d\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD PORT=\"FROM_variance_d\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">title<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_title\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">intervention_technique<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD PORT=\"FROM_intervention_technique\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD PORT=\"FROM_intervention_category\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"year_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"2\">year_n_study<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD PORT=\"FROM_year\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD PORT=\"FROM_n_study\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD PORT=\"FROM_wansink\"><\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">n_comparison_n_control<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_comparison\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_control\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\" BGCOLOR=\"black\"><\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>This partly happens because removing relations removes more
information than it needs to. If we remove the relevant functional
dependencies instead, then we can have new intermediate relations appear
in the new schema, whose dependencies were originally redundant by
transitivity. Removing relations directly can’t account for this.</p>
</div>
<div class="section level2">
<h2 id="alternative-approach-hierarchical-limits">Alternative approach: hierarchical limits<a class="anchor" aria-label="anchor" href="#alternative-approach-hierarchical-limits"></a>
</h2>
<p>An alternative approach is to make use of our knowledge that the data
is hierarchical, and remove dependencies where an attribute is
co-determining an attribute on a lower level. For example,
publication-level attributes shouldn’t co-determine study- or
measurement-level attributes. This means we don’t find cases where they
do, but we could decide that any such cases are spurious, and we don’t
want to spend time on them.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hlev</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  publication_id <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  study_id <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  es_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  reference <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  title <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  location <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  domain <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  intervention_category <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  intervention_technique <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  type_experiment <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  population <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_study <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_comparison <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  n_control <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  n_intervention <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  binary_outcome <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mean_control <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sd_control <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mean_intervention <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sd_intervention <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cohens_d <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  variance_d <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  approximation <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  wansink <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="va">hfilter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fds</span>, <span class="va">hlev</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">fds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span></span>
<span>    \<span class="op">(</span><span class="va">det</span>, <span class="va">dep</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">hlev</span><span class="op">[</span><span class="va">det</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="va">hlev</span><span class="op">[[</span><span class="va">dep</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/detset.html">detset</a></span><span class="op">(</span><span class="va">fds</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/dependant.html">dependant</a></span><span class="op">(</span><span class="va">fds</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">]</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Filtered result for the original data:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/discover.html">discover</a></span><span class="op">(</span>exclude_class <span class="op">=</span> <span class="st">"numeric"</span>, detset_limit <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hfilter</span><span class="op">(</span><span class="va">hlev</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/normalise.html">normalise</a></span><span class="op">(</span>remove_avoidable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/decompose.html">decompose</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">nudge</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/reduce.html">reduce</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-72cbf064100ce560a04c" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-72cbf064100ce560a04c">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"reference\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">reference (212 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"title\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">title (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_location\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_location (217 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_domain\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_domain (220 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_type_experiment\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">publication_id_type_experiment (231 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"publication_id_n_study\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"4\">publication_id_n_study (318 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"title\":FROM_reference -> \"reference\":TO_reference;\n  \"publication_id_location\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_location\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_domain\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_domain\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_type_experiment\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_type_experiment\":FROM_reference -> \"title\":TO_reference;\n  \"publication_id_n_study\":FROM_publication_id -> \"title\":TO_publication_id;\n  \"publication_id_n_study\":FROM_reference -> \"title\":TO_reference;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"study_id\":FROM_publication_id -> \"publication_id_location\":TO_publication_id;\n  \"study_id\":FROM_location -> \"publication_id_location\":TO_location;\n  \"study_id\":FROM_publication_id -> \"publication_id_domain\":TO_publication_id;\n  \"study_id\":FROM_domain -> \"publication_id_domain\":TO_domain;\n  \"study_id\":FROM_publication_id -> \"publication_id_type_experiment\":TO_publication_id;\n  \"study_id\":FROM_type_experiment -> \"publication_id_type_experiment\":TO_type_experiment;\n  \"study_id\":FROM_publication_id -> \"publication_id_n_study\":TO_publication_id;\n  \"study_id\":FROM_n_study -> \"publication_id_n_study\":TO_n_study;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>Filtered result for the fixed data:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nudge_fixed</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/discover.html">discover</a></span><span class="op">(</span>exclude_class <span class="op">=</span> <span class="st">"numeric"</span>, detset_limit <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">hfilter</span><span class="op">(</span><span class="va">hlev</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/normalise.html">normalise</a></span><span class="op">(</span>remove_avoidable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/decompose.html">decompose</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">nudge_fixed</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-d11fc4360aa0230696d7" style="width:100%;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-d11fc4360aa0230696d7">{"x":{"diagram":"digraph {\n  rankdir = \"LR\"\n  node [shape=plaintext];\n\n  \"publication_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">publication_id (213 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_reference\">reference<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_reference\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_title\">title<\/TD><TD><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_title\">character<\/TD><\/TR>\n    <TR><TD PORT=\"TO_year\">year<\/TD><TD><\/TD><TD><\/TD><TD><\/TD><TD PORT=\"FROM_year\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id (334 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_publication_id\">publication_id<\/TD><TD><\/TD><TD PORT=\"FROM_publication_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_location\">location<\/TD><TD><\/TD><TD PORT=\"FROM_location\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_domain\">domain<\/TD><TD><\/TD><TD PORT=\"FROM_domain\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_type_experiment\">type_experiment<\/TD><TD><\/TD><TD PORT=\"FROM_type_experiment\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_population\">population<\/TD><TD><\/TD><TD PORT=\"FROM_population\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_study\">n_study<\/TD><TD><\/TD><TD PORT=\"FROM_n_study\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_wansink\">wansink<\/TD><TD><\/TD><TD PORT=\"FROM_wansink\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"es_id\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">es_id (447 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_es_id\">es_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_es_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_binary_outcome\">binary_outcome<\/TD><TD><\/TD><TD PORT=\"FROM_binary_outcome\">logical<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_control\">mean_control<\/TD><TD><\/TD><TD PORT=\"FROM_mean_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_control\">sd_control<\/TD><TD><\/TD><TD PORT=\"FROM_sd_control\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_mean_intervention\">mean_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_mean_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_sd_intervention\">sd_intervention<\/TD><TD><\/TD><TD PORT=\"FROM_sd_intervention\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_cohens_d\">cohens_d<\/TD><TD><\/TD><TD PORT=\"FROM_cohens_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_variance_d\">variance_d<\/TD><TD><\/TD><TD PORT=\"FROM_variance_d\">numeric<\/TD><\/TR>\n    <TR><TD PORT=\"TO_approximation\">approximation<\/TD><TD><\/TD><TD PORT=\"FROM_approximation\">logical<\/TD><\/TR>\n    <\/TABLE>>];\n  \"intervention_technique\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">intervention_technique (9 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_technique\">intervention_technique<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_intervention_technique\">factor<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"study_id_n_intervention\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"3\">study_id_n_intervention (396 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_study_id\">study_id<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_study_id\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_intervention_category\">intervention_category<\/TD><TD><\/TD><TD PORT=\"FROM_intervention_category\">factor<\/TD><\/TR>\n    <\/TABLE>>];\n  \"n_comparison_n_control\" [label = <\n    <TABLE BORDER=\"0\" CELLBORDER=\"1\" CELLSPACING=\"0\" CELLPADDING=\"4\">\n    <TR><TD COLSPAN=\"5\">n_comparison_n_control (346 records)<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_comparison\">n_comparison<\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD PORT=\"FROM_n_comparison\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_control\">n_control<\/TD><TD BGCOLOR=\"black\"><\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_control\">integer<\/TD><\/TR>\n    <TR><TD PORT=\"TO_n_intervention\">n_intervention<\/TD><TD><\/TD><TD BGCOLOR=\"black\"><\/TD><TD BGCOLOR=\"black\"><\/TD><TD PORT=\"FROM_n_intervention\">integer<\/TD><\/TR>\n    <\/TABLE>>];\n\n  \"study_id\":FROM_publication_id -> \"publication_id\":TO_publication_id;\n  \"es_id\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"study_id_n_intervention\":FROM_study_id -> \"study_id\":TO_study_id;\n  \"es_id\":FROM_intervention_technique -> \"intervention_technique\":TO_intervention_technique;\n  \"es_id\":FROM_n_comparison -> \"n_comparison_n_control\":TO_n_comparison;\n  \"es_id\":FROM_n_control -> \"n_comparison_n_control\":TO_n_control;\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Webster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
